<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="styles/ico.svg" type="image/svg+xml">
    <link rel="stylesheet" href="styles/login.css">
    <title>Welcome to Techno Pharms.</title>
</head>

<body>
    <section>
        <div class="container">

            <div id="goback"> ‚óÄ Home</div>

            <img src="src/login.avif" alt="login" id="loginImg">

            <div class="InputSec">
                <div class="InputForms" id="userForm" style="display: none;">

                    <img src="src/logo.avif" alt="logo" srcset="" id="logoRight">

                    <h2>üßîüèª Welcome back, Let's Solve your trouble.</h2>

                    <div id="note">Note: Login as User here.</div>

                    <label for="user-email">Enter User Email.</label>
                    <input type="email" name="user-email" id="user-email" placeholder="user@gmail.com">

                    <label for="user-password">Enter password.</label>
                    <input type="password" name="user-password" id="user-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

                    <button id="login-user-getIn">Login</button>

                    <div class="switchRole">
                        <p>Are you a shopkeeper?</p>
                        <button onclick="showShopkeeperForm()" id="goforms">Login as Shopkeeper</button>
                    </div>

                </div>

                <div class="InputForms" id="shopkeeperForm" style="display: none;">

                    <img src="src/logo.avif" alt="logo" srcset="" id="logoRight">

                    <h2>üë®üèª‚Äçüîß Welcome Expert, Lets solve the troubles.</h2>

                    <div id="note">Note: Login as Shopkeeper here.</div>

                    <label for="shopkeeper-email">Enter Shopkeeper Email.</label>
                    <input type="email" name="shopkeeper-email" id="shopkeeper-email"
                        placeholder="shopkeeper@gmail.com">

                    <label for="shopkeeper-password">Enter password.</label>
                    <input type="password" name="shopkeeper-password" id="shopkeeper-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

                    <button id="login-shopkeeper-getIn" onclick="login_Shopkeeper_getIn()">Login</button>

                    <script>
                        function login_Shopkeeper_getIn() {
                            const email = document.getElementById("shopkeeper-email").value.trim();
                            const password = document.getElementById("shopkeeper-password").value;

                            if (!email || !password) {
                                alert("Please enter email and password.");
                                return;
                            }

                            fetch("scripts/login.php", {
                                method: "POST",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify({ email, password })
                            })
                                .then(res => res.json())
                                .then(data => {
                                    if (data.success) {
                                        window.location.href = "scripts/dashboard.php"; // Protected page
                                    } else {
                                        alert(data.message);
                                    }
                                })
                                .catch(err => {
                                    console.error(err);
                                    alert("Login failed.");
                                });
                        }
                    </script>


                    <div class="switchRole">
                        <p>Are you a User?</p>
                        <button onclick="showUserForm()" id="goforms">Login as User</button>
                    </div>

                </div>
                <button onclick="goRegister()" id="goforms">Register</button>
            </div>

        </div>
    </section>

    <script src="scripts/login.js"></script>
</body>

</html>