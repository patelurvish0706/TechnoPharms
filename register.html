<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="styles/ico.svg" type="image/svg+xml">
    <link rel="stylesheet" href="styles/login.css">
    <title>Register - Techno Pharms</title>
</head>

<body>
    <section>
        <div class="container">

            <div id="goback"> ‚óÄ Home</div>

            <img src="src/registration.avif" alt="login" id="loginImg">

            <div class="InputSec">
                <div class="InputForms" id="userForm" style="display: none;">

                    <img src="src/logo.avif" alt="logo" srcset="" id="logoRight">

                    <h2>Welcome to TechnoPharms, Get Rid off Trouble.</h2>

                    <div id="note">Note: Register as User here.üßîüèª</div>

                    <label for="reg-user-email">Enter User Email</label>
                    <input type="email" name="reg-user-email" id="reg-user-email" placeholder="user@gmail.com">

                    <label for="reg-user-password">Enter password</label>
                    <input type="password" name="reg-user-password" id="reg-user-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

                    <label for="reg-user-repassword">Re-Enter password</label>
                    <input type="password" name="reg-user-repassword" id="reg-user-repassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

                    <button id="reg-user-getIn">Register Me</button>

                    <div class="switchRole">
                        <p>Are you a shopkeeper?</p>
                        <button onclick="showShopkeeperForm()" id="goforms">Register as Shopkeeper</button>
                    </div>

                </div>

                <div class="InputForms" id="shopkeeperForm" style="display: none;">

                    <img src="src/logo.avif" alt="logo" srcset="" id="logoRight">

                    <h2>Welcome Expert, Lets Crack Off Tech Stucks.</h2>

                    <div id="note">Note: Register as Shopkeeper here.üë®üèª‚Äçüîß</div>

                    <label for="reg-shopkeeper-email">Enter Shopkeeper Email.*</label>
                    <input type="email" name="reg-shopkeeper-email" id="reg-shopkeeper-email"
                        placeholder="shopkeeper@gmail.com">

                    <label for="reg-shopkeeper-password">Enter password.*</label>
                    <input type="password" name="reg-shopkeeper-password" id="reg-shopkeeper-password"
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

                    <label for="reg-shopkeeper-repassword">Re-enter password.*</label>
                    <input type="password" name="reg-shopkeeper-repassword" id="reg-shopkeeper-repassword"
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

                    <button id="reg-shoopkeeper-getIn" onclick="reg_shoopkeeper_getIn()">Register Me</button>

                    <script>
                        function reg_shoopkeeper_getIn() {
                            const email = document.getElementById("reg-shopkeeper-email").value.trim();
                            const password = document.getElementById("reg-shopkeeper-password").value;
                            const repassword = document.getElementById("reg-shopkeeper-repassword").value;

                            // Simple email regex
                            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                            if (!email || !password || !repassword) {
                                alert("All fields are required.");
                                return;
                            }

                            if (!emailRegex.test(email)) {
                                alert("Please enter a valid email address.");
                                return;
                            }

                            if (password.length < 6) {
                                alert("Password must be at least 6 characters.");
                                return;
                            }

                            if (password !== repassword) {
                                alert("Passwords do not match.");
                                return;
                            }

                            // Send to PHP via Fetch
                            fetch("scripts/register.php", {
                                method: "POST",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify({ email, password })
                            })
                                .then(res => res.text())
                                .then(response => {
                                    alert(response);
                                })
                                .catch(err => {
                                    console.error(err);
                                    alert("Something went wrong.");
                                });
                        }
                    </script>

                    <div class="switchRole">
                        <p>Are you a User?</p>
                        <button onclick="showUserForm()" id="goforms">Register as User</button>
                    </div>
                </div>

                <button onclick="goLogin()" id="goforms">Login</button>


            </div>

        </div>
    </section>

    <script src="scripts/login.js"></script>
</body>

</html>